<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator</title>
    <link rel="stylesheet" href="Calculator-Mobile.css">
</head>

<!-- 

Strukturierung: 
Body -> Main:
    Section Sidebar
        - Sidebar 
    Section Right (alles was nicht die Sidebar betrifft) -> Section button-nav
        - Step 0 (Willkommensslide)
        - Step 1
        - Step 2
        - Step 3
        - Step 4
        - Step 5
        - Step 6
        - Step 7 (Theoretisch: Sum-Up Slide, zum Überprüfen der Daten)
        - Step 8 (Theoretisch: Dankesslide)

Verwendete Tags:
<body>  
<main>
<section>
<fieldset> 
<legend>
<div> (ist nicht nutzbar für die UX)
<button>
<label>
<input>
<p>
<h1>
<h2>
<h3>

-->

<body>
    <main>
        <!-- Sidebar start -->
        <section class="sidebar" aria-label="Seitenleiste" tabindex="-1">
            <div class="sidebar_element" aria-current="step">
                <h2 class="circle_element circle_current">0</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Willkommen</h2>
                    <h1 class="copy_bottom">Kalkulatorstart</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">1</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Schritt 1</h2>
                    <h1 class="copy_bottom">Arbeitsplätze und Server</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">2</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Schritt 2</h2>
                    <h1 class="copy_bottom">Standorte</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">3</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Schritt 3</h2>
                    <h1 class="copy_bottom">Produktion und Lager</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">4</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Schritt 4</h2>
                    <h1 class="copy_bottom">Betriebszeiten</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">5</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Schritt 5</h2>
                    <h1 class="copy_bottom">NIS-Richtlinien</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">6</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Schritt 6</h2>
                    <h1 class="copy_bottom">Kontaktdaten für das Angebot</h1>
                </div>
            </div>
            <div class="sidebar_element">
                <h2 class="circle_element">7</h2>
                <div class="sidebar_copy">
                    <h2 class="copy_top">Letzter Schritt</h2>
                    <h1 class="copy_bottom">Überprüfung der Angaben</h1>
                </div>
            </div>
        </section>
        <!-- Sidebar end -->

        <!-- Step 0 start -->
        <section class="right" aria-label="Formularbereich">
            <fieldset class="step_card" aria-labelledby="header">
                <h1 class="card_header" id="header">Kalkulatorstart</h1>
                <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, einblenden und zwischen > < hier ergänzen -->
                <div class="start_description">
                    <label for="calculator_start">Um den Kalkulator zu starten, "Start" oder Enter drücken.</label>
                    <p>Bitte beantworten Sie alle Fragen durch Eingabe oder durch Auswahl eines Buttons. Pro Frage kann
                        nur eine Button-Option gewählt werden. <br> Felder die nicht mit optinal gekennzeichnet sind,
                        sind verpflichtend.</p>
                    <p>Der Kalkulator ist ein Formular, welches von unseren Mitarbeitern genutzt wird, um ein
                        individuelles angebot für Sie zu erstellen. Dafür beinhaltet der Kalkulator Fragen über die
                        Firma und Kontaktdaten.</p>
                </div>
            </fieldset>
            <!-- Step 0 end -->

            <section class="right_step">
                <!-- Step 1 start -->
                <fieldset class="step_card" aria-labelledby="headline1" role="region">
                    <h1 class="card_header" id="headline1" tabindex="-1">Arbeitsplätze und Server</h1>
                    <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, hier ergänzen -->

                    <fieldset class="input-container">
                        <legend id="label_id1">Wie viele PC-Arbeitsplätze sollen verwaltet werden?</legend>
                        <input class="input-field" type="number" inputmode="numeric" id="input1_id" name="form_input1"
                            placeholder="Anzahl der Arbeitsplätze" required aria-describedby="i-err1"
                            aria-invalid="true" tabindex="0">
                        <p class="error-text" id="i-err1" aria-live="polite">Bitte geben Sie eine Zahl an.</p>
                    </fieldset>
                    <p class="space"></p>

                    <fieldset class="radio-container" aria-describedby="err1" aria-invalid="true">
                        <legend id="label_id2">Benötigen Sie Serversysteme?</legend>
                        <div class="card_row">
                            <div class="plan_card" tabindex="0">
                                <input type="radio" name="radiobuttons1" id="radio1" value="Ja" required="required">
                                <label class="plan_card_label" for="radio1">Ja</label>
                            </div>
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons1" id="radio2" value="Nein" required="required">
                                <label class="plan_card_label" for="radio2">Nein</label>
                            </div>
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons1" id="radio3" value="Sonstiges"
                                    required="required">
                                <label class="plan_card_label" for="radio3">Sonstiges</label>
                            </div>
                        </div>
                        <p class="error-text" id="err1" aria-live="polite">Bitte wählen Sie einen der Buttons aus.</p>
                    </fieldset>
                    <p class="space"></p>
                </fieldset>
                <!-- Step 1 end -->

                <!-- Step 2 start -->
                <fieldset class="step_card" aria-labelledby="headline2" role="region">
                    <h1 class="card_header" id="headline2" tabindex="-1">Standorte</h1>
                    <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, hier ergänzen -->

                    <fieldset class="input-container">
                        <legend id="label_id3">Wie viele Standorte hat Ihr Unternehmen?</legend>
                        <input class="input-field" type="number" inputmode="numeric" id="input2_id" name="form_input2"
                            placeholder="Anzahl der Standorte" required aria-describedby="i-err2" aria-invalid="true">
                        <p class="error-text" id="i-err2" aria-live="polite">Bitte geben Sie eine Zahl an.</p>
                    </fieldset>
                    <p class="space"></p>

                    <fieldset class="radio-container" aria-describedby="err1" aria-invalid="true">
                        <legend for="label4" id="label_id4">Befinden sich Standorte außerhalb Deutschlands?</legend>
                        <div class="card_row">
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons2" id="radio4" value="Ja" required="required">
                                <label class="plan_card_label" for="radio4">Ja</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons2" id="radio5" value="Nein" required="required">
                                <label class="plan_card_label" for="radio5">Nein</label>
                            </div>
                        </div>
                        <p class="error-text" id="err2" aria-live="polite">Bitte wählen Sie einen der Buttons aus.</p>
                    </fieldset>
                    <p class="space"></p>
                </fieldset>
                <!-- Step 2 end -->

                <!-- Step 3 start -->
                <fieldset class="step_card" aria-labelledby="headline3" role="region">
                    <h1 class="card_header" id="headline3" tabindex="-1">Produktion und Lager</h1>
                    <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, hier ergänzen -->

                    <fieldset class="radio-container" aria-describedby="err3" aria-invalid="true">
                        <legend for="label5" id="label_id5">Nutzen Sie Produktionsbereiche, die in die IT-Umgebung
                            integriert werden muss?</legend>

                        <div class="card_row">
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons3" id="radio6" value="Ja" required="required">
                                <label class="plan_card_label" for="radio6">Ja</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons3" id="radio7" value="Nein" required="required">
                                <label class="plan_card_label" for="radio7">Nein</label>
                            </div>
                        </div>
                        <p class="error-text" id="err3" aria-live="polite">Bitte wählen Sie einen der Buttons aus.</p>
                    </fieldset>
                    <p class="space"></p>

                    <fieldset class="radio-container" aria-describedby="err4" aria-invalid="true">
                        <legend for="label6" id="label_id6">Haben Sie Lager-und Logistikbereiche, die betreut werden
                            müssen?</legend>

                        <div class="card_row">
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons4" id="radio8" value="Ja" required="required">
                                <label class="plan_card_label" for="radio8">Ja</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons4" id="radio9" value="Nein" required="required">
                                <label class="plan_card_label" for="radio9">Nein</label>
                            </div>

                            <p class="error-text" id="err4" aria-live="polite">Bitte wählen Sie einen der Buttons aus.
                            </p>
                    </fieldset>
                    <p class="space"></p>
                </fieldset>
                <!-- Step 3 end -->

                <!-- Step 4 start -->
                <fieldset class="step_card" aria-labelledby="headline4" role="region">
                    <h1 class="card_header" id="headline4" tabindex="-1">Betriebszeiten</h1>
                    <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, hier ergänzen -->

                    <fieldset class="radio-container" aria-describedby="err5" aria-invalid="true">
                        <legend for="label7" id="label_id7">Wie sehen Ihre Betriebszeiten aus?</legend>

                        <div class="card_row">
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons5" id="radio10" value="Mo - Fr"
                                    required="required">
                                <label class="plan_card_label" for="radio10">Mo - Fr</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons5" id="radio11" value="Wochenende"
                                    required="required">
                                <label class="plan_card_label" for="radio11">Wochenende</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons5" id="radio12" value="24 / 7"
                                    required="required">
                                <label class="plan_card_label" for="radio12">24 / 7</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons5" id="radio13" value="Sonstiges"
                                    required="required">
                                <label class="plan_card_label" for="radio13">Sonstiges</label>
                            </div>
                        </div>
                        <p class="error-text" id="err5" aria-live="polite">Bitte wählen Sie einen der Buttons aus.</p>
                    </fieldset>
                    <p class="space"></p>
                </fieldset>
                <!-- Step 4 end -->

                <!-- Step 5 start -->
                <fieldset class="step_card" aria-labelledby="headline5" role="region">
                    <h1 class="card_header" id="headline5" tabindex="-1">NIS-Richtlinien</h1>
                    <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, hier ergänzen -->

                    <fieldset class="radio-container" aria-describedby="err6" aria-invalid="true">
                        <legend for="label8" id="label_id8">Fällt Ihr Unternehmen unter die NIS 2-Richtlinie (Netz-
                            und Informationssicherheit)?</legend>

                        <div class="card_row">
                            <div class="plan_card">
                                <input type="radio" name="radiobuttons6" id="radio14" value="Ja" required="required">
                                <label class="plan_card_label" for="radio14">Ja</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons6" id="radio15" value="Nein" required="required">
                                <label class="plan_card_label" for="radio15">Nein</label>
                            </div>

                            <div class="plan_card">
                                <input type="radio" name="radiobuttons6" id="radio16" value="Weiß nicht"
                                    required="required">
                                <label class="plan_card_label" for="radio16">Weiß nicht</label>
                            </div>
                        </div>
                        <p class="error-text" id="err6" aria-live="polite">Bitte wählen Sie einen der Buttons aus.</p>
                    </fieldset>
                    <p class="space"></p>
                </fieldset>
                <!-- Step 5 end -->

                <!-- Step 6 start -->
                <fieldset class="step_card" id="last-question-slide" aria-labelledby="headline6" role="region">
                    <h1 class="card_header" id="headline6" tabindex="-1">Kontaktdaten für das Angebot</h1>
                    <!-- <h3 class="header_caption"> </h3>  Falls eine Unterüberschrift benötigt wird, hier ergänzen -->


                    <fieldset class="input-container">
                        <legend id="label_id9">Name</legend>
                        <input class="input-field" type="text" inputmode="text" autocomplete="name" id="input3_id"
                            name="form_input3" placeholder="Name, Vorname" required aria-describedby="i-err4"
                            aria-invalid="true">
                        <p class="error-text" id="i-err4" aria-live="polite">Bitte geben Sie Ihren Namen an.</p>
                    </fieldset>
                    <p class="space"></p>


                    <fieldset class="input-container">
                        <legend id="label_id10">Firma</legend>
                        <input class="input-field" type="text" inputmode="text" autocomplete="organization"
                            id="input4_id" name="form_input4" placeholder="Name der Firma" required
                            aria-describedby="i-err5" aria-invalid="true">
                        <p class="error-text" id="i-err5" aria-live="polite">Bitte geben Sie den Namen Ihrer Firma an.
                        </p>
                    </fieldset>
                    <p class="space"></p>

                    <fieldset class="input-container">
                        <legend id="label_id11">E-Mail</legend>
                        <input class="input-field" type="email" inputmode="email" autocomplete="email" id="input5_id"
                            name="form_input5" placeholder="E-Mail Adresse" required aria-describedby="i-err6"
                            aria-invalid="true">
                        <p class="error-text" id="i-err6" aria-live="polite">Bitte geben Sie Ihre E-Mail Adresse an.
                        </p>
                    </fieldset>
                    <p class="space"></p>

                    <fieldset class="input-container">
                        <legend id="label_id11">Telefonnummer (optional)</legend>
                        <input class="input-field" type="tel" inputmode="tel" autocomplete="tel" id="input6_id"
                            name="form_input6" placeholder="Telefonnummer">
                    </fieldset>
                    <p class="space"></p>
                </fieldset>
                <!-- Step 6 end -->

                <!-- Step 7 start -->
                <fieldset class="step_card submitslide" id="reviewContainer" aria-labelledby="headline7" role="region">
                    <h1 class="card_header submitslide" id="headline7" tabindex="-1">Überprüfung der Angaben</h1>
                    <div class="header_caption submitslide" id="label_id12">
                        Bitte überprüfen Sie Ihre Angaben:
                        <br>
                        <p class="checkup">PC-Arbeitsplätze: <span id="reviewWorkstations"></span></p>
                        <p class="checkup">Serversysteme: <span id="reviewServers"></span></p>
                        <p class="checkup">Standorte: <span id="reviewLocations"></span></p>
                        <p class="checkup">Standorte außerhalb Deutschlands: <span id="reviewOutside"></span></p>
                        <p class="checkup">Produktionsbereiche: <span id="reviewProducts"></span></p>
                        <p class="checkup">Lager- und Logistikbereiche: <span id="reviewWarehouse"></span></p>
                        <p class="checkup">Betriebszeiten: <span id="reviewTime"></span></p>
                        <p class="checkup">NIS-Richtlinie: <span id="reviewNIS"></span></p>
                        <p class="checkup">Name: <span id="reviewName"></span></p>
                        <p class="checkup">Firma: <span id="reviewCompany"></span></p>
                        <p class="checkup">E-Mail: <span id="reviewEmail"></span></p>
                        <p class="checkup">Telefon: <span id="reviewTel"></span></p>
                        <br>
                        Um das Formular abzuschicken, bitte Enter, Pfeiltaste oder per Mausklick auf den
                        Abschicken-Button drücken.
                        <br>
                        <p class="space"></p>
                        <label class="checkbox-container">
                            Ich akzeptiere die Datenschutzerklärung und willige in die Verarbeitung meiner
                            personenbezogenen Daten ein.
                            <input type="checkbox" id="privacy" required>
                            <span class="checkmark"></span>
                            <p class="error-text" id="i-err7" aria-live="polite">Bitte akzeptieren Sie.</p>
                        </label>
                    </div>
                </fieldset>
                <!-- Step 7 end -->

                <!-- Step 8 start -->
                <div class="step_card" id="thankSlide" aria-labelledby="thank" role="region">
                    <h1 class="card_header thank_header" id="thank" tabindex="-1">Danke!</h1>
                    <div class="end">
                        <p class="header_caption thanking">Vielen Dank für Ihre Angaben. Wir melden und schnellstmöglich
                            bei Ihnen.
                        </p>
                        <p class="text">
                            Bei weiteren Fragen können Sie uns per E-Mail oder Telefon erreichen. <br>
                            E-Mail: ... <br>
                            Telefon: ... <br>
                            Oder vereinbaren Sie einen Termin.<br>
                            Ihr mars solutions Team
                        </p>
                    </div>
                </div>
                <!-- Step 8 end -->
            </section>
            <section class="button-nav" aria-label="Button Navigationsbereich">
                <nav class="div_nav_button">
                    <button class="back invisible" type="button" aria-label="zum vorigen Schritt"
                        tabindex="0">Zurück</button>
                    <button class="next " type="button" aria-label="Zum nächsten Schritt" tabindex="0">Weiter</button>
                </nav>
            </section>
        </section>
    </main>
</body>
<script>

    const slides = document.querySelectorAll(".step_card");
    const circles = document.querySelectorAll(".circle_element");
    const nextSlide = document.querySelector(".next");
    const prevSlide = document.querySelector(".back");
    const thankSlideIndex = document.getElementById("thankSlide");
    const thankSlide = Array.from(slides).indexOf(thankSlideIndex);

    let curSlide = 0;
    // Variablere Version durch Berechnung
    //   const maxSlide = slides.length - 2; 
    //   const prevMaxSlide = slides.length - 3;
    // Fixe Version mit der Id der Slide 
    const maxSlideIndex = document.getElementById("reviewContainer");
    const maxSlide = Array.from(slides).indexOf(maxSlideIndex);
    const prevMaxSlideIndex = document.getElementById("last-question-slide");
    const prevMaxSlide = Array.from(slides).indexOf(prevMaxSlideIndex);

    // Setzte Fokus immer auf erstes Element der Slide
    requestAnimationFrame(() => {
        document.querySelector('.step_card.visible h1')?.focus();
    });

    // Debug-Funktion, um den aktuellen Slide-Index und den zugehörigen Circle auszugeben
    function debugCurrentSlideAndCircle() {
        console.log("Aktueller Slide-Index:", curSlide);
        console.log("Anzahl Slides:", slides.length);
        if (curSlide < circles.length) {
            console.log("Aktueller Circle:", circles[curSlide]);
        } else {
            console.log("Kein passender Circle für den aktuellen Slide-Index gefunden.");
        }
    }

    // Current Circle der Sidebar mit farblicher Hervorhebung steuern 
    function updateCircles() {
        circles.forEach(circle => circle.classList.remove("circle_current"));
        if (curSlide <= maxSlide) {
            circles[curSlide].classList.add("circle_current");
        }
        debugCurrentSlideAndCircle();
    }

    // Slide Position 
    function updateSlidePosition() {
        slides.forEach((slide, indx) => {
            slide.style.display = indx === curSlide ? "block" : "none";
        });
    }

    // Button Navigation (Umbennennung der Namen vom Next Button und Einblendung des Zurück Buttons ab Slide 2)
    function navButton() {
        if (curSlide === thankSlide) {
            nextSlide.style.display = "none";
            prevSlide.style.display = "none";
            return;
        }
        nextSlide.style.display = "block";
        prevSlide.classList.toggle("invisible", curSlide < 2);

        const buttonLabels = {
            0: "Start",
            [prevMaxSlide]: "Überprüfen",
            [maxSlide]: "Abschicken"
        };

        nextSlide.textContent = buttonLabels[curSlide] || "Weiter";
    }

    // Next Slide mit Überprüfung der Eingabe und Ausgabe von Fehlermeldungen (Text und Farbe)
    function goToNextSlide() {
        const currentSlide = slides[curSlide];
        const inputs = currentSlide.querySelectorAll("input[required]");
        let allFilled = true;
        let checkedRadioGroups = new Set();

        inputs.forEach(input => {
            if (input.type === "radio") {
                if (!checkedRadioGroups.has(input.name)) {
                    checkedRadioGroups.add(input.name);
                    const isChecked = document.querySelector(`input[name="${input.name}"]:checked`);
                    const allRadios = document.querySelectorAll(`input[name="${input.name}"]`);
                    allRadios.forEach(radio => {
                        const container = radio.closest(".radio-container");
                        const errorText = container?.querySelector(".error-text");
                        if (!isChecked) {
                            allFilled = false;
                            if (errorText) errorText.style.display = "block";
                            radio.closest(".plan_card")?.classList.add("input-error");
                        } else {
                            if (errorText) errorText.style.display = "none";
                            radio.closest(".plan_card")?.classList.remove("input-error");
                        }
                    });
                }
            } else if (input.type === "email") {
                const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                const describedById = input.getAttribute("aria-describedby");
                const errorText = describedById ? document.getElementById(describedById) : null;
                if (!emailPattern.test(input.value.trim())) {
                    allFilled = false;
                    input.classList.add("input-error");
                    if (errorText) errorText.style.display = "block";
                } else {
                    input.classList.remove("input-error");
                    if (errorText) errorText.style.display = "none";
                }
            } else if (input.type === "number") {
                const numPattern = /^\d{1,6}$/;
                const describedById = input.getAttribute("aria-describedby");
                const errorText = describedById ? document.getElementById(describedById) : null;
                if (!numPattern.test(input.value.trim())) {
                    allFilled = false;
                    input.classList.add("input-error");
                    if (errorText) errorText.style.display = "block";
                } else {
                    input.classList.remove("input-error");
                    if (errorText) errorText.style.display = "none";
                }
            } else if (input.type === "checkbox") {
                if (!input.checked) {
                    allFilled = false;

                    const errorText = input.parentElement.querySelector(".error-text");
                    if (errorText) errorText.style.display = "block";

                    const checkmark = input.parentElement.querySelector(".checkmark");
                    if (checkmark) {
                        checkmark.classList.add("checkbox-error");

                        // Automatisch scrollen zu diesem Element
                        checkmark.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center',
                            inline: 'nearest'
                        });
                    }

                } else {
                    const errorText = input.parentElement.querySelector(".error-text");
                    if (errorText) errorText.style.display = "none";

                    const checkmark = input.parentElement.querySelector(".checkmark");
                    if (checkmark) {
                        checkmark.classList.remove("checkbox-error");
                    }
                }

            } else {
                const describedById = input.getAttribute("aria-describedby");
                const errorText = describedById ? document.getElementById(describedById) : null;
                if (!input.value.trim()) {
                    allFilled = false;
                    input.classList.add("input-error");
                    if (errorText) errorText.style.display = "block";
                } else {
                    input.classList.remove("input-error");
                    if (errorText) errorText.style.display = "none";
                }
            }
        });

        if (!allFilled) {
            return;
        }

        // Übergänge zwischen den Slides:
        if (curSlide === prevMaxSlide) {
            populateReviewSlide();
            curSlide++;
        } else if (curSlide === maxSlide) {
            curSlide = thankSlide;
        } else {
            curSlide++;
        }

        updateSlidePosition();
        updateCircles();
        navButton();
    }

    // Zurück Button 
    function goToPrevSlide() {
        if (curSlide > 1) {
            curSlide--;
            updateSlidePosition();
            updateCircles();
            navButton();
        }
    }

    // Next- und Prev-Buttons steuern die Navigation
    nextSlide.addEventListener("click", goToNextSlide);
    prevSlide.addEventListener("click", goToPrevSlide);

    // Keydown-Event: Beibehalten, falls der Benutzer mit Enter/Arrow navigiert
    document.addEventListener("keydown", function (event) {
        if (curSlide === thankSlide) {
            return;
        }
        if (event.key === "Enter" || event.key === "ArrowRight") {
            goToNextSlide();
        } else if (event.key === "ArrowLeft") {
            goToPrevSlide();
        }
    });

    // Check Slide: Eingabewerte holen und ausgeben
    function populateReviewSlide() {
        const mappings = [
            { source: document.getElementById("input1_id"), target: "reviewWorkstations" },
            { source: document.querySelector('input[name="radiobuttons1"]:checked'), target: "reviewServers" },
            { source: document.getElementById("input2_id"), target: "reviewLocations" },
            { source: document.querySelector('input[name="radiobuttons2"]:checked'), target: "reviewOutside" },
            { source: document.querySelector('input[name="radiobuttons3"]:checked'), target: "reviewProducts" },
            { source: document.querySelector('input[name="radiobuttons4"]:checked'), target: "reviewWarehouse" },
            { source: document.querySelector('input[name="radiobuttons5"]:checked'), target: "reviewTime" },
            { source: document.querySelector('input[name="radiobuttons6"]:checked'), target: "reviewNIS" },
            { source: document.getElementById("input3_id"), target: "reviewName" },
            { source: document.getElementById("input4_id"), target: "reviewCompany" },
            { source: document.getElementById("input5_id"), target: "reviewEmail" },
            { source: document.getElementById("input6_id"), target: "reviewTel" }
        ];

        mappings.forEach(mapping => {
            const value = mapping.source ? mapping.source.value : "";
            const targetElement = document.getElementById(mapping.target);
            if (targetElement) {
                targetElement.textContent = value;
            }
        });
    }


    // Initiale Position und Button-Text festlegen
    updateSlidePosition();
    navButton();

    // Number Input Überprüfung
    document.querySelectorAll('input[type="number"]').forEach(input => {
        input.addEventListener("input", function (e) {
            let value = e.target.value.replace(/\D/g, '');

            if (value.length > 1 && value.startsWith("0")) {
                value = value.replace(/^0+/, '');
                if (value === '') {
                    value = '0';
                }
            }

            if (value.length > 6) {
                value = value.slice(0, 6);
            }
            e.target.value = value;
        });

        input.addEventListener("keydown", function (e) {
            if (e.key === "ArrowUp" && Number(e.target.value) === 999999) {
                e.preventDefault();
            }
        });
    });





    /**
     * 
     * TODO: php Code vollständig anpassen 
     * 
     * if (isset($_POST['action']) && $_POST['action'] == 'custom_form') {}  -> anpassen
     * add_actions anpassen 
     * 
     
    
     function sendKalkEmail() {
    // Optional: Überprüfe ein Nonce-Feld, um CSRF zu vermeiden.
    if ( ! isset($_POST['custom_form_nonce']) || ! wp_verify_nonce($_POST['custom_form_nonce'], 'custom_form_action') ) {
        wp_die('Sicherheitsüberprüfung fehlgeschlagen.');
    }

    if ( isset($_POST['action']) && $_POST['action'] == 'custom_form' ) {
        // Definition der Formularfelder und deren Typen
        $fields = [
            'form_input1' => 'number',  // Achte auf den korrekten Schlüssel!
            'form_input2' => 'number',
            'form_input3' => 'text',
            'form_input4' => 'text',
            'form_input5' => 'email',
            'form_input6' => 'text',
        ];

        $inputs = [];
        foreach ($fields as $key => $type) {
            $value = isset($_POST[$key]) ? wp_unslash($_POST[$key]) : '';
            switch ($type) {
                case 'number':
                    $inputs[$key] = sanitize_number_field($value);
                    break;
                case 'email':
                    $inputs[$key] = sanitize_email($value);
                    break;
                default:
                    $inputs[$key] = sanitize_text_field($value);
            }
        }

        // Für Radio-Buttons (falls vorhanden)
        $radio_keys = [
            'radiobuttons1',
            'radiobuttons2',
            'radiobuttons3',
            'radiobuttons3-1',
            'radiobuttons4',
            'radiobuttons5'
        ];
        $radios = [];
        foreach ($radio_keys as $key) {
            $radios[$key] = isset($_POST[$key]) ? sanitize_text_field(wp_unslash($_POST[$key])) : '';
        }

        $empfaenger = 'katja.kremmelbein@mars-solutions.de';
        $betreff = 'Neue Kalkulator Anfrage';

        $timestamp = current_time('mysql');

        // Nachricht als HTML aufbauen (daher auch Content-Type anpassen)
        $nachricht_inhalt = 
            "<strong>Arbeitsplätze und Server</strong><br>" .
            "Wie viele PC-Arbeitsplätze sollen verwaltet werden?: $input1<br><br>" .

            "<strong>Standorte</strong><br>" .
            "Wie viele Standorte hat Ihr Unternehmen?: $input2<br>" .
            "Befinden sich Standorte außerhalb Deutschlands?: $rbutton2<br><br>" .

            "<strong>Produktion und Lager</strong><br>" .
            "Nutzen Sie Produktionsbereiche, die in die IT-Umgebung integriert werden müssen?: $rbutton3<br>" .
            "Haben Sie Lager- und Logistikbereiche, die betreut werden müssen?: $rbutton3_1<br><br>" .

            "<strong>Betriebszeiten</strong><br>" .
            "Wie sehen Ihre Betriebszeiten aus?: $rbutton4<br><br>" .

            "<strong>NIS-Richtlinie</strong><br>" .
            "Fällt Ihr Unternehmen unter die NIS 2-Richtlinie (Netz- und Informationssicherheit)?: $rbutton5<br><br>" .

            "<strong>Kontaktdaten</strong><br>" .
            "Name: $input3<br>" .
            "Firma: $input4<br>" .
            "Email: $input5<br>".
            "Telefon: $input6<br>".

             "<strong>Zeitstempel</strong>: $timestamp<br>";


        // Header anpassen, da HTML verwendet wird
        $headers = array('Content-Type: text/html; charset=UTF-8');

        // E-Mail senden
        wp_mail($empfaenger, $betreff, $nachricht_inhalt, $headers);

        // Optional: Sicherer Redirect
        // wp_safe_redirect(home_url('/danke/'));
        exit;
    }
}
add_action('admin_post_nopriv_custom_form', 'sendKalkEmail');
add_action('admin_post_custom_form', 'sendKalkEmail');

*/
</script>

</html>